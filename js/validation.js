import{activateAdressSearchButton}from"./state.js";import{isLengthValid}from"./utils.js";const MAX_COMMENT_LENGTH=142,commentValidation=t=>{const s=t.target,e=s.value;r.textContent=e.length;const a=s.parentElement,r=a.querySelector(".js-comment-count");isLengthValid(e,142)?(a.classList.contains("js-comment-error")&&a.classList.remove("js-comment-error"),s.setCustomValidity("")):(a.classList.add("js-comment-error"),s.setCustomValidity(`Лимит длины комментария превышен на\n          ${e.length-142} симв.`)),s.reportValidity()},reportAdressValidationError=(t,s)=>{!t.parentElement.classList.contains("js-adress-invalid")&&t.parentElement.classList.add("js-adress-invalid"),t.parentElement.classList.contains("js-adress-valid")&&t.parentElement.classList.remove("js-adress-valid"),t.setCustomValidity(s),t.reportValidity()},reportAdressValidationSuccess=t=>{t.parentElement.classList.contains("js-adress-invalid")&&t.parentElement.classList.remove("js-adress-invalid"),!t.parentElement.classList.contains("js-adress-valid")&&t.parentElement.classList.add("js-adress-valid"),t.setCustomValidity(""),activateAdressSearchButton()},verifyAdress=t=>{let s;return t.focus(),"null"===t.dataset.city||"0"===t.dataset.city?(s=reportAdressValidationError.bind(null,t,"Пожалуйста добавьте город, улицу, дом и номер квартиры для доставки."),s()):"null"===t.dataset.street||"0"===t.dataset.street?(s=reportAdressValidationError.bind(null,t,"Пожалуйста добавьте улицу, дом и номер квартиры для доставки."),s()):"null"===t.dataset.house||"0"===t.dataset.house?(s=reportAdressValidationError.bind(null,t,"Пожалуйста добавьте дом и номер квартиры для доставки."),s()):"null"===t.dataset.flat||"0"===t.dataset.flat?(s=reportAdressValidationError.bind(null,t,"Пожалуйста добавьте номер квартиры для доставки."),s()):(s=reportAdressValidationSuccess.bind(null,t),s())};export{commentValidation,verifyAdress};